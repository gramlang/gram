language: generic
services:
  - docker
script:
  - make docker-gram-build &&
    make docker-gram &&
    docker run gramlang/gram -v && (
      test "$TRAVIS_PULL_REQUEST" != "false" ||
      test "$TRAVIS_BRANCH" != "master" ||
      SKIP_DOCKER_GRAM_DEPS_PUSH=YES ./scripts/deploy.sh
    )
